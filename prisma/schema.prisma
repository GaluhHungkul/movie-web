generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

model User {
  id             String          @id @default(uuid())
  name           String?
  email          String?         @unique
  password       String?
  oauthProvider  String?
  createdAt      DateTime        @default(now())
  updatedAt      DateTime        @updatedAt
  image          String          @default("/assets/img/default_pp.png")
  favoritesMovie FavoriteMovie[]
  //? Subscription
  isSubscribe Boolean @default(false)
  startedSubscribeAt DateTime?
  expiredSubscribeAt DateTime?

  subscribePlanTitle String?
  subscribePlanId String?
  subscribePlan SubscribePlan? @relation(fields: [subscribePlanId], references: [id]) 
}

model FavoriteMovie {
  id            String  @id @default(uuid())
  userId        String
  movieId       String
  title         String
  poster_path   String
  backdrop_path String
  isMovie Boolean
  added_at DateTime @default(now())

  user          User    @relation(fields: [userId], references: [id])
  
  @@unique([userId, movieId])
}

model SubscribePlan {
  id String @id @default(uuid())
  title String
  description String
  price Float
  timePeriod String? @default("Month")

  user User[]
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
// model LearnUser {
//   id         String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
//   created_at DateTime  @default(now()) @db.Timestamptz(6)
//   updated_at DateTime? @default(now()) @db.Timestamp(6)
//   name       String?   @db.VarChar
//   email      String?   @db.VarChar
//   age        BigInt?
// }
